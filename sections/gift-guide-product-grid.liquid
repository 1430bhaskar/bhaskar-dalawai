{% comment %}
Gift Guide — Product Grid (image-only cards)
• Six pickers + upsell handle (data attribute)
• Grid shows ONLY the image with a small "+" badge (no title/price)
• gift-guide.js handles modal, variants, and upsell
{% endcomment %}

<script src="{{ 'gift-guide.js' | asset_url }}" defer="defer"></script>

<section id="gift-guide-grid-{{ section.id }}" class="gift-guide-grid-section"
  data-money-format="{{ shop.money_format | escape }}"
  data-upsell-handle="{{ all_products[section.settings.upsell_product].handle | default: 'soft-winter-jacket' }}"
  aria-label="Gift Guide product grid">

  {% if section.settings.grid_heading != blank %}
    <h2 class="gg-grid__heading">{{ section.settings.grid_heading }}</h2>
  {% endif %}
  <h2 class="gg-grid-title">Tisso vison in the wild</h2>

  <div id="gift-guide-grid-anchor" class="gg-grid">
    {% for i in (1..6) %}
      {% assign picker = 'product_' | append: i %}
      {% if section.settings[picker] != blank %}
        {% assign prod = all_products[section.settings[picker]] %}
        {% if prod %}
          <article class="gg-card" data-handle="{{ prod.handle }}" tabindex="0" role="button" aria-label="{{ prod.title }}">
            <div class="gg-card__image">
              <img src="{{ prod.featured_image | img_url: '900x' }}" alt="{{ prod.featured_image.alt | default: prod.title | escape }}">
              <span class="gg-card__plus" aria-hidden="true">+</span>
            </div>
          </article>
        {% else %}
          <div class="gg-card gg-card--empty">Product {{ i }} not found</div>
        {% endif %}
      {% else %}
        <div class="gg-card gg-card--placeholder">Select product {{ i }}</div>
      {% endif %}
    {% endfor %}
  </div>

  <!-- Modal -->
<div id="gg-modal" class="gg-popup">
  <button class="gg-popup-close">×</button>
  <div class="gg-popup-content">
    <img src="{{ product.featured_image | img_url: 'medium' }}" alt="{{ product.title }}">
    <h3 class="gg-popup-title">{{ product.title }}</h3>
    <p class="gg-popup-price">{{ product.price | money }}</p>
    <p class="gg-popup-description">{{ product.description }}</p>
    
    <div class="gg-popup-options">
      <label>Color</label>
      <div class="gg-popup-colors">
        {% for option in product.options_with_values %}
          {% if option.name == "Color" %}
            {% for value in option.values %}
              <button class="gg-color-option" data-value="{{ value }}">{{ value }}</button>
            {% endfor %}
          {% endif %}
        {% endfor %}
      </div>
      
      <label>Size</label>
      <select class="gg-size-select">
        <option value="">Choose your size</option>
        {% for option in product.options_with_values %}
          {% if option.name == "Size" %}
            {% for value in option.values %}
              <option value="{{ value }}">{{ value }}</option>
            {% endfor %}
          {% endif %}
        {% endfor %}
      </select>
    </div>
    
    <button class="gg-add-to-cart">ADD TO CART →</button>
  </div>
</div>

</section>

{% schema %}
{
  "name": "Gift Guide Product Grid",
  "settings": [
    {
      "type": "product",
      "id": "product_1",
      "label": "Product 1"
    },
    {
      "type": "product",
      "id": "product_2",
      "label": "Product 2"
    },
    {
      "type": "product",
      "id": "product_3",
      "label": "Product 3"
    },
    {
      "type": "product",
      "id": "product_4",
      "label": "Product 4"
    },
    {
      "type": "product",
      "id": "product_5",
      "label": "Product 5"
    },
    {
      "type": "product",
      "id": "product_6",
      "label": "Product 6"
    },
    {
      "type": "product",
      "id": "upsell_product",
      "label": "Upsell Product"
    }
  ],
  "presets": [
    {
      "name": "Gift Guide Product Grid"
    }
  ]
}
{% endschema %}
